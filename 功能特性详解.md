# Hajimi King Go - 功能特性详解

## 🎯 核心功能

### 1. 🔍 GitHub密钥搜索
**功能描述**: 基于自定义查询表达式在GitHub代码仓库中搜索API密钥

**技术实现**:
- 使用GitHub Code Search API
- 支持复杂查询语法和过滤条件
- 多Token轮换避免API限制
- 智能分页处理，最多处理10页结果

**查询示例**:
```bash
# 基础搜索
AIzaSy in:file

# 特定文件类型搜索
AIzaSy in:file filename:.env

# 语言过滤
AIzaSy in:file language:python

# 路径过滤
AIzaSy in:file path:config
```

**性能优化**:
- 随机延迟避免触发限制
- 代理轮换提高成功率
- 连接池复用减少开销

### 2. 🌐 代理支持系统
**功能描述**: 支持多代理轮换，提高访问稳定性和成功率

**支持类型**:
- HTTP代理
- SOCKS5代理
- 代理认证（用户名/密码）

**配置示例**:
```bash
# 单个代理
PROXY=http://localhost:1080

# 多个代理（逗号分隔）
PROXY=http://proxy1:8080,http://proxy2:8080,socks5://proxy3:1080

# 带认证的代理
PROXY=http://user:pass@proxy:8080
```

**智能特性**:
- 随机选择代理
- 自动故障转移
- 连接超时控制

### 3. 📊 增量扫描机制
**功能描述**: 支持断点续传，避免重复扫描已处理的文件

**核心特性**:
- 检查点系统保存扫描状态
- SHA值去重避免重复处理
- 时间过滤只扫描新文件
- 查询去重避免重复搜索

**检查点数据结构**:
```json
{
  "last_scan_time": "2024-01-01T12:00:00Z",
  "scanned_shas": ["sha1", "sha2", "..."],
  "processed_queries": ["query1", "query2", "..."],
  "wait_send_balancer": ["key1", "key2", "..."],
  "wait_send_gpt_load": ["key1", "key2", "..."]
}
```

### 4. 🚫 智能过滤系统
**功能描述**: 自动过滤文档、示例、测试文件，专注有效代码

**过滤规则**:
- 文件路径黑名单过滤
- 仓库年龄过滤（默认730天）
- 时间戳过滤（增量扫描）
- 占位符密钥过滤

**默认黑名单**:
```bash
readme, docs, doc/, .md, example, sample, 
tutorial, test, spec, demo, mock
```

### 5. 🔄 外部服务同步
**功能描述**: 支持向Gemini-Balancer和GPT-Load同步发现的密钥

#### Gemini Balancer同步
- 获取当前配置
- 合并新密钥
- 更新配置
- 支持Cookie认证

#### GPT Load Balancer同步
- 多组支持
- 异步添加密钥
- Bearer Token认证
- 组ID缓存机制

**同步特性**:
- 异步队列处理
- 批量发送优化
- 失败重试机制
- 去重处理

### 6. 🔐 持久化登录系统
**功能描述**: Web界面支持24小时自动登录，提升使用体验

**认证机制**:
- JWT Token认证
- 24小时有效期
- 本地存储持久化
- 自动续期机制

**安全特性**:
- 强密码要求
- Token加密存储
- 自动过期清理
- 安全退出机制

## 🌐 Web管理界面

### 1. 实时统计面板
**功能特性**:
- 总密钥数统计
- 有效密钥计数
- 限流密钥计数
- 自动刷新（30秒）

### 2. 高级搜索功能
**搜索选项**:
- 密钥类型筛选（全部/有效/限流）
- 关键词搜索（密钥/仓库/文件）
- 仓库名称筛选
- 分页大小调整

### 3. 密钥管理功能
**管理特性**:
- 密钥列表展示
- 单个密钥复制
- 批量密钥复制
- 仓库链接跳转
- 发现时间显示

### 4. 响应式设计
**界面特性**:
- 移动端适配
- 现代化UI设计
- 渐变色彩方案
- 悬停动效
- 加载状态提示

## 🔧 配置管理

### 1. 环境变量配置
**必填配置**:
```bash
GITHUB_TOKENS=ghp_token1,ghp_token2  # GitHub访问令牌
```

**重要配置**:
```bash
PROXY=http://localhost:1080          # 代理服务器
DATA_PATH=./data                     # 数据存储目录
DATE_RANGE_DAYS=730                  # 仓库年龄过滤
QUERIES_FILE=queries.txt             # 查询配置文件
HAJIMI_CHECK_MODEL=gemini-2.5-flash  # 验证模型
API_ENABLED=true                     # 启用API服务器
API_PORT=8080                        # API端口
API_AUTH_KEY=your_secure_key         # API访问密钥
```

**外部服务配置**:
```bash
# Gemini Balancer
GEMINI_BALANCER_SYNC_ENABLED=false
GEMINI_BALANCER_URL=
GEMINI_BALANCER_AUTH=

# GPT Load Balancer
GPT_LOAD_SYNC_ENABLED=false
GPT_LOAD_URL=
GPT_LOAD_AUTH=
GPT_LOAD_GROUP_NAME=group1,group2
```

### 2. 查询配置文件
**文件格式**: `queries.txt`
**语法支持**: GitHub Code Search语法
**注释支持**: `#` 开头的行为注释

**示例配置**:
```bash
# 基础搜索
AIzaSy in:file

# 环境文件搜索
AIzaSy in:file filename:.env

# Python文件搜索
AIzaSy in:file language:python

# 配置文件搜索
AIzaSy in:file path:config
```

## 📊 性能优化

### 1. 并发处理
- **Goroutine池**: 高效的并发处理
- **批量验证**: 减少API调用次数
- **异步同步**: 不阻塞主流程

### 2. 内存优化
- **预编译正则**: 避免重复编译
- **连接池**: 复用HTTP连接
- **缓存机制**: 减少重复计算

### 3. 网络优化
- **代理轮换**: 提高成功率
- **重试机制**: 处理网络异常
- **超时控制**: 避免长时间等待

### 4. 存储优化
- **增量扫描**: 避免重复处理
- **文件分片**: 便于管理
- **压缩存储**: 节省空间

## 🔒 安全特性

### 1. 数据安全
- **密钥去重**: 避免重复存储
- **敏感信息过滤**: 过滤占位符
- **安全日志**: 记录操作历史

### 2. 访问控制
- **JWT认证**: 安全的API访问
- **权限验证**: 防止未授权访问
- **会话管理**: 自动过期机制

### 3. 网络安全
- **代理支持**: 隐藏真实IP
- **HTTPS支持**: 加密传输
- **错误脱敏**: 避免信息泄露

## 📈 监控和统计

### 1. 实时监控
- **处理进度**: 实时显示扫描进度
- **成功率统计**: 验证成功率跟踪
- **错误统计**: 各类错误计数

### 2. 日志系统
- **多级别日志**: DEBUG/INFO/WARN/ERROR
- **结构化日志**: 便于分析
- **日志轮转**: 避免文件过大

### 3. 性能指标
- **处理速度**: 文件/秒
- **内存使用**: 实时监控
- **网络状态**: 连接质量

## 🚀 部署支持

### 1. 本地部署
- **单文件部署**: 编译后单个二进制文件
- **Docker支持**: 容器化部署
- **跨平台**: 支持多操作系统

### 2. 配置管理
- **环境变量**: 灵活的配置方式
- **配置文件**: 支持.env文件
- **默认值**: 开箱即用

### 3. 数据持久化
- **文件存储**: 本地文件系统
- **检查点**: 支持断点续传
- **备份恢复**: 数据安全保护

## 🔮 待开发功能

### 1. 数据库支持
- [ ] 密钥持久化存储
- [ ] 关系型数据库支持
- [ ] 数据查询优化

### 2. 高级功能
- [ ] 付费密钥检测
- [ ] 密钥使用统计
- [ ] 自动密钥轮换

### 3. 监控增强
- [ ] 实时监控面板
- [ ] 告警系统
- [ ] 性能分析

这个功能特性详解展示了Hajimi King Go的完整功能集，从核心的密钥搜索到高级的Web管理界面，以及各种性能优化和安全特性，为用户提供了一个强大而灵活的API密钥管理解决方案。